<!--
	class: class of the figure
	link: url the image directs to
	alt: alternative text
	caption: caption
	mouse: what the image says when moused over ("title" in HTML)
-->
<figure {{ with .Get "class" }}class="{{.}}"{{ end -}}>
	{{- with .Get "link"}}<a href="{{.}}">{{ end -}}
	<img style="display: block; margin-left: auto; margin-right: auto;" src="{{ .Get "src" }}"
	     {{- with .Get "mouse" }} title="{{.}}"{{ end -}}
	     {{- with .Get "alt" }} alt="{{.}}"{{ end -}}
	>
	{{- if .Get "link"}}</a>{{ end -}}

	{{ if .Get "caption" }}
		{{if .Get "source"}}
			<figcaption style="text-align: center;">
				{{- (.Get "caption") | markdownify -}}
				<br>
				{{- (delimit (slice "Source: " (.Get "source")) "" ) | markdownify -}}
			</figcaption>
		{{else}}
			<figcaption style="text-align: center;">
				{{- (.Get "caption") | markdownify -}}
			</figcaption>
		{{end}}
	{{- end -}}
</figure>